#Базовая модель

Предназначена для изоляции бизнес логики от фреймворка. 
Для подключения к конкретному фреймворку, необходим класс реализующий интерфейс EntityManager.

Бизнес -логика описывается в классах наследующих класс Model и оперирует сущностями (классы наследующие Entity). 

Методы класса Model в качестве аргументов принимают некоторые параметры, либо иммутабельные объекты наследующие ValueObject. В них происходит валидация входных данных
В качесве параметров нельзя передавать ссылки на объекты фреймворка.
Пример:

```php 
$em = new EntityManager();
$model = new Profile($em);

try{
	$userData = new UserData($login, $password); // Наследуется от ValueObject
	$model->updateUser($userId, $userData);
}catch(ValidateException $e){
	echo 'Ошибка валидации: ' . $e->getMessage();
}
```

На модель или сущности можно "повесить" наблюдателя. Состояние субъекта наблюдения определяется через флаг состояния. В качестве примера реализован логгер. Это необходимо для получения состояния модели без вмешательства в код модели.

Связь между сущностями осуществляется через EntityManager. 
Пример:

```php 

class User extends Entity
{
	public function getAvatar()
	{
		$em = EntityManager::getInstance();
		return $em->find(Avatar::class, ['userId' => $this->getId()]);
	}
}
```

Такие методы являются lazy load и после первого обращения в сущности сохраняется ссылка на объект.
